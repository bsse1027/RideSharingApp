version: '3'

services:
    ride-sharing:
        build: ./services/rideSharing
        #image: junaid894/ride-sharing
        restart: always
        depends_on: 
            - communication

    communication:
        build: ./services/communication
        #image: junaid894/communication
        ports: 
            - 8081:8081
        restart: always
    
    rating:
        build: ./services/rating
        #image: junaid894/rating
        restart: always
        depends_on: 
            - mongodb
    
    nginx:
        build: ./services/nginx
        ports: 
            - 8080:80
        depends_on: 
            - ride-sharing
            - rating

    mongodb:
        image: mongo
        # environment: 
        #     MONGO_INITDB_ROOT_USERNAME: 
        #     MONGO_INITDB_ROOT_PASSWORD: 
        ports: 
            - 27017:27017
        volumes: 
            - mongodb_data_container:/data/db

volumes: 
    mongodb_data_container:



